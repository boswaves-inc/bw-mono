CREATE VIEW "public"."cart_data" AS (select "cart_info"."id", "cart_info"."uid", json_agg(json_build_object('id', "item_info"."id", 'type', "item_info"."type", 'name', "item_info"."name", 'slug', "item_info"."slug", 'status', "item_info"."status", 'created_at', "item_info"."created_at", 'updated_at', "item_info"."updated_at")) FILTER (WHERE "item_info"."id" is not null) as "items" from "cart_info" left join "cart_item" on "cart_info"."id" = "cart_item"."id" inner join "item_price" on "cart_item"."item_price" = "item_price"."id" left join "item_info" on "item_price"."item_id" = "item_info"."id" group by "cart_info"."id");